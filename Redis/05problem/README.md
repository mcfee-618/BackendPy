## 大key问题

在 Redis 实例中会形成很大的对象，比如一个很大的 hash，一个很大的 zset 这都是经常出现的。这样的对象对 Redis 的集群数据迁移带来了很大的问题，因为在集群环境下，如果某个 key 太大，会数据导致迁移卡顿。另外在内存分配上，如果一个 key 太大，那么当它需要扩容时，会一次性申请更大的一块内存，这也会导致卡顿。如果这个大 key 被删除，内存会一次性回收，卡顿现象会再一次产生。
```
在平时的业务开发中，要尽量避免大 key 的产生。
```

* 如何定位大key:Redis 官方已经在 redis-cli 指令中提供了这样的扫描功能，我们可以直接拿来即用。通过Redis-cli –bigkeys 可以很方便的找到某个实例最大的几个KEY，但是只能得到某种类型的最大的一个key。

```
redis-cli -h 127.0.0.1 -p 7001 –-bigkeys
redis-cli -h 127.0.0.1 -p 7001 –-bigkeys -i 0.1 增加休眠参数，防止在查询过程 ops(每秒操作次数)暴增
```